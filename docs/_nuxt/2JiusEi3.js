import O from"./CZQ1q976.js";import{f as j,a as J,u as W}from"./DwglZU8H.js";import{d as P,c as d,o as r,a as e,b as v,e as E,F as S,r as I,t as a,u as s,f as A,w as Z,g as ee,h as R,i as Q,n as N,j as F,k as D,l as T,m as te,p as C,v as L,q as U,s as q}from"./UOz9bPn-.js";import{f as Y}from"./DK1fvZ5c.js";import{u as G}from"./B_V9sKPR.js";import{u as H}from"./DX3r1CdD.js";const se={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2"},ne={class:"btn btn-primary"},oe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},le={class:"card-body"},ae={class:"card-title"},ie={class:"text-sm text-base-content/70"},de={class:"flex justify-between items-center mt-2"},re={class:"text-lg font-bold"},ue={class:"badge badge-outline"},me={class:"card-actions justify-end mt-4"},ce={class:"btn btn-sm btn-ghost"},pe={class:"btn btn-sm btn-error"},be=P({__name:"ProductsTab",setup(M){const o=[{id:1,title:"Laptop",price:89999,stock:5,category:"Electronics"},{id:2,title:"Coffee Mug",price:1299,stock:20,category:"Kitchen"},{id:3,title:"Book",price:2499,stock:15,category:"Education"}];return(x,m)=>{const g=O;return r(),d("div",null,[e("div",se,[m[1]||(m[1]=e("h2",{class:"text-2xl font-bold"},"Produtos",-1)),e("button",ne,[v(g,{name:"mdi:plus",size:"20"}),m[0]||(m[0]=E(" Adicionar Produto "))])]),e("div",oe,[(r(),d(S,null,I(o,b=>e("div",{key:b.id,class:"card card-border"},[e("div",le,[e("h3",ae,a(b.title),1),e("p",ie,a(b.category),1),e("div",de,[e("span",re,a(("formatAsMoney"in x?x.formatAsMoney:s(j))(b.price)),1),e("span",ue,"Estoque: "+a(b.stock),1)]),e("div",me,[e("button",ce,[v(g,{name:"mdi:pencil",size:"16"})]),e("button",pe,[v(g,{name:"mdi:delete",size:"16"})])])])])),64))])])}}}),fe=Object.assign(be,{__name:"AdminProductsTab"}),ve={key:0,class:"flex justify-between items-center mb-4"},_e={class:"text-lg font-bold"},ge={class:"modal-content"},ye={key:1,class:"modal-action"},xe=P({__name:"GenericModal",props:{modelValue:{type:Boolean},title:{default:""},size:{default:"md"}},emits:["update:modelValue"],setup(M,{emit:o}){const x=M,m=o,g=A();Z(()=>x.modelValue,l=>{var _,y;l?(_=g.value)==null||_.showModal():(y=g.value)==null||y.close()});function b(){m("update:modelValue",!1)}function u(l){l.target===g.value&&b()}const h=ee(()=>{switch(x.size){case"sm":return"max-w-sm";case"lg":return"max-w-4xl";case"xl":return"max-w-6xl";default:return"max-w-2xl"}});return(l,_)=>{const y=O;return r(),d("dialog",{ref_key:"modalRef",ref:g,class:"modal",onClick:u,onClose:b},[e("div",{class:N(["modal-box",s(h)])},[l.title?(r(),d("div",ve,[e("h3",_e,a(l.title),1),e("button",{class:"btn btn-sm btn-circle btn-ghost",onClick:b},[v(y,{name:"mdi:close",size:"16"})])])):R("",!0),e("div",ge,[Q(l.$slots,"default")]),l.$slots.footer?(r(),d("div",ye,[Q(l.$slots,"footer")])):R("",!0)],2),e("form",{method:"dialog",class:"modal-backdrop"},[e("button",{onClick:b},"close")])],544)}}}),K=Object.assign(xe,{__name:"GenericModal"}),he={key:0,class:"flex justify-center items-center py-8"},$e={key:1,class:"text-center py-8"},we={key:2,class:"overflow-x-auto"},ke={class:"table table-zebra"},Ce={class:"flex gap-2"},Ae=["onClick"],De=["onClick","title"],Te=["onClick"],Ee={key:0,class:"space-y-6"},ze={class:"card bg-base-200"},Me={class:"card-body"},Ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Pe={class:"font-medium"},je={class:"font-medium"},Se={class:"font-medium"},Ie={class:"card bg-base-200"},Oe={class:"card-body"},Ue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qe={class:"font-medium"},Ne={class:"font-medium"},Re={class:"card bg-base-200"},Be={class:"card-body"},Le={class:"overflow-x-auto"},Fe={class:"table table-sm"},Ge={class:"font-semibold"},He={class:"flex gap-2 justify-end"},Ke=P({__name:"OrdersTab",async setup(M){let o,x;const{data:m,pending:g,refresh:b}=([o,x]=F(()=>G("/api/v1/orders/get/all",{key:"allOrders"},"$n1mqN4Xs9R")),o=await o,x(),o),u=A(null),h=A(!1),{showSuccess:l,showError:_}=H();function y(t){return t?"badge-success":"badge-warning"}function w(t){return t?"Entregue":"Pendente"}function k(t){return new Date(t).toLocaleDateString("pt-BR")}async function i(t,n){try{await $fetch(`/api/v1/orders/edit/${t}`,{method:"PUT",body:{isDelivered:!n}}),await b();const $=n?"pendente":"entregue";u.value.isDelivered=!n,l(`Pedido marcado como ${$} com sucesso!`)}catch($){console.error("Erro ao atualizar status do pedido:",$),_("Erro ao atualizar status do pedido")}}async function V(t){if(confirm("Tem certeza que deseja deletar este pedido?"))try{await $fetch(`/api/v1/orders/delete/${t}`,{method:"DELETE"}),await b(),l("Pedido deletado com sucesso!")}catch(n){console.error("Erro ao deletar pedido:",n),_("Erro ao deletar pedido")}}function z(t){return t.reduce((n,$)=>n+$.priceInCents*$.quantity,0)}function p(t){u.value=t,h.value=!0}return(t,n)=>{var B;const $=O,f=K;return r(),d("div",null,[n[17]||(n[17]=e("div",{class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2"},[e("h2",{class:"text-2xl font-bold"},"Pedidos")],-1)),s(g)?(r(),d("div",he,n[3]||(n[3]=[e("span",{class:"loading loading-spinner loading-lg"},null,-1)]))):!s(m)||s(m).length===0?(r(),d("div",$e,n[4]||(n[4]=[e("p",{class:"text-base-content/60"},"Nenhum pedido encontrado",-1)]))):(r(),d("div",we,[e("table",ke,[n[5]||(n[5]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Cliente"),e("th",null,"Apartamento"),e("th",null,"Total"),e("th",null,"Status"),e("th",null,"Data"),e("th",null,"Horário de Entrega"),e("th",null,"Ações")])],-1)),e("tbody",null,[(r(!0),d(S,null,I(s(m),c=>(r(),d("tr",{key:c.id,class:"hover"},[e("td",null,a(c.id),1),e("td",null,a(c.client.name),1),e("td",null,a(c.client.apartment),1),e("td",null,a(("formatAsMoney"in t?t.formatAsMoney:s(j))(z(c.orderItems))),1),e("td",null,[e("span",{class:N(["badge",y(c.isDelivered)])},a(w(c.isDelivered)),3)]),e("td",null,a(k(c.orderDate)),1),e("td",null,a(("formatDeliveryTime"in t?t.formatDeliveryTime:s(Y))(c.deliveryTime)),1),e("td",null,[e("div",Ce,[e("button",{class:"btn btn-sm btn-ghost",onClick:X=>p(c),title:"Ver detalhes"},[v($,{name:"mdi:eye",size:"16"})],8,Ae),e("button",{class:"btn btn-sm btn-ghost",onClick:X=>i(c.id,c.isDelivered),title:c.isDelivered?"Marcar como pendente":"Marcar como entregue"},[v($,{name:c.isDelivered?"mdi:undo":"mdi:check",size:"16"},null,8,["name"])],8,De),e("button",{class:"btn btn-sm btn-ghost text-error",onClick:X=>V(c.id),title:"Deletar pedido"},[v($,{name:"mdi:trash",size:"16"})],8,Te)])])]))),128))])])])),v(f,{modelValue:s(h),"onUpdate:modelValue":n[2]||(n[2]=c=>T(h)?h.value=c:null),title:`Detalhes do Pedido #${(B=s(u))==null?void 0:B.id}`,size:"lg"},{footer:D(()=>[e("div",He,[s(u)?(r(),d("button",{key:0,class:N(["btn btn-primary",{"btn-warning":s(u).isDelivered}]),onClick:n[0]||(n[0]=c=>i(s(u).id,s(u).isDelivered))},[v($,{name:s(u).isDelivered?"mdi:undo":"mdi:check",size:"16"},null,8,["name"]),E(" "+a(s(u).isDelivered?"Marcar como Pendente":"Marcar como Entregue"),1)],2)):R("",!0),e("button",{class:"btn btn-ghost",onClick:n[1]||(n[1]=c=>h.value=!1)}," Fechar ")])]),default:D(()=>[s(u)?(r(),d("div",Ee,[e("div",ze,[e("div",Me,[n[10]||(n[10]=e("h4",{class:"card-title text-lg"},"Informações do Cliente",-1)),e("div",Ve,[e("div",null,[n[6]||(n[6]=e("p",{class:"text-sm text-base-content/70"},"Nome",-1)),e("p",Pe,a(s(u).client.name),1)]),e("div",null,[n[7]||(n[7]=e("p",{class:"text-sm text-base-content/70"},"Telefone",-1)),e("p",je,a(s(u).client.phone),1)]),e("div",null,[n[8]||(n[8]=e("p",{class:"text-sm text-base-content/70"},"Apartamento",-1)),e("p",Se,a(s(u).client.apartment),1)]),e("div",null,[n[9]||(n[9]=e("p",{class:"text-sm text-base-content/70"},"Status",-1)),e("span",{class:N(["badge",y(s(u).isDelivered)])},a(w(s(u).isDelivered)),3)])])])]),e("div",Ie,[e("div",Oe,[n[13]||(n[13]=e("h4",{class:"card-title text-lg"},"Informações do Pedido",-1)),e("div",Ue,[e("div",null,[n[11]||(n[11]=e("p",{class:"text-sm text-base-content/70"},"Data do Pedido",-1)),e("p",qe,a(k(s(u).orderDate)),1)]),e("div",null,[n[12]||(n[12]=e("p",{class:"text-sm text-base-content/70"},"Horário de Entrega",-1)),e("p",Ne,a(("formatDeliveryTime"in t?t.formatDeliveryTime:s(Y))(s(u).deliveryTime)),1)])])])]),e("div",Re,[e("div",Be,[n[16]||(n[16]=e("h4",{class:"card-title text-lg"},"Itens do Pedido",-1)),e("div",Le,[e("table",Fe,[n[15]||(n[15]=e("thead",null,[e("tr",null,[e("th",null,"Produto"),e("th",null,"Quantidade"),e("th",null,"Preço Unitário"),e("th",null,"Subtotal")])],-1)),e("tbody",null,[(r(!0),d(S,null,I(s(u).orderItems,c=>(r(),d("tr",{key:c.id},[e("td",null,a(c.product.title),1),e("td",null,a(c.quantity),1),e("td",null,a(("formatAsMoney"in t?t.formatAsMoney:s(j))(c.priceInCents)),1),e("td",null,a(("formatAsMoney"in t?t.formatAsMoney:s(j))(c.priceInCents*c.quantity)),1)]))),128))]),e("tfoot",null,[e("tr",Ge,[n[14]||(n[14]=e("td",{colspan:"3",class:"text-right"}," Total: ",-1)),e("td",null,a(("formatAsMoney"in t?t.formatAsMoney:s(j))(z(s(u).orderItems))),1)])])])])])])])):R("",!0)]),_:1},8,["modelValue","title"])])}}}),Xe=Object.assign(Ke,{__name:"AdminOrdersTab"}),Qe={key:0,class:"flex justify-center py-8"},Ye={key:1,class:"text-center py-8"},Je={key:2,class:"overflow-x-auto"},We={class:"table table-zebra"},Ze={class:"flex gap-2"},et=["onClick","title"],tt={class:"text-center"},st={class:"flex gap-2 justify-end"},nt=P({__name:"ClientsTab",async setup(M){let o,x;const{showSuccess:m,showError:g}=H(),{data:b,pending:u,refresh:h}=([o,x]=F(()=>G("/api/v1/clients/get/all",{key:"allClients"},"$SaK2Yvu-bX")),o=await o,x(),o),l=A(!1),_=A(null),y=k=>{_.value=k,l.value=!0},w=async()=>{var k;if(_.value)try{await $fetch(`/api/v1/clients/delete/${_.value.id}`,{method:"DELETE"}),await h(),l.value=!1,_.value=null,m("Cliente removido com sucesso")}catch(i){g(((k=i.data)==null?void 0:k.message)||"Erro ao remover cliente"),console.error("Error deleting client:",i)}};return(k,i)=>{const V=O,z=K;return r(),d("div",null,[i[9]||(i[9]=e("div",{class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2"},[e("h2",{class:"text-2xl font-bold"},"Clientes")],-1)),s(u)?(r(),d("div",Qe,i[2]||(i[2]=[e("span",{class:"loading loading-spinner loading-lg"},null,-1)]))):!s(b)||s(b).length===0?(r(),d("div",Ye,i[3]||(i[3]=[e("p",{class:"text-base-content/60"},"Nenhum cliente encontrado",-1)]))):(r(),d("div",Je,[e("table",We,[i[4]||(i[4]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Nome"),e("th",null,"Telefone"),e("th",null,"Apartamento"),e("th",null,"Ações")])],-1)),e("tbody",null,[(r(!0),d(S,null,I(s(b),p=>(r(),d("tr",{key:p.id},[e("td",null,a(p.id),1),e("td",null,a(p.name),1),e("td",null,a(("formatPhone"in k?k.formatPhone:s(J))(p.phone)),1),e("td",null,a(p.apartment),1),e("td",null,[e("div",Ze,[e("button",{class:"btn btn-sm btn-error",onClick:t=>y(p),title:`Remover ${p.name}`},[v(V,{name:"mdi:delete",size:"16"})],8,et)])])]))),128))])])])),v(z,{modelValue:s(l),"onUpdate:modelValue":i[1]||(i[1]=p=>T(l)?l.value=p:null),title:"Confirmar Exclusão",size:"sm"},{footer:D(()=>[e("div",st,[e("button",{class:"btn btn-ghost",onClick:i[0]||(i[0]=p=>l.value=!1)}," Cancelar "),e("button",{class:"btn btn-error",onClick:w},[v(V,{name:"mdi:delete",size:"16"}),i[7]||(i[7]=E(" Remover "))])])]),default:D(()=>{var p;return[e("p",tt,[i[5]||(i[5]=E(" Tem certeza que deseja remover o cliente ")),e("strong",null,a((p=s(_))==null?void 0:p.name),1),i[6]||(i[6]=E("? "))]),i[8]||(i[8]=e("p",{class:"text-center text-sm text-base-content/60 mt-2"}," Esta ação não pode ser desfeita e todos os pedidos associados também serão afetados. ",-1))]}),_:1,__:[8]},8,["modelValue"])])}}}),ot=Object.assign(nt,{__name:"AdminClientsTab"}),lt={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2"},at={key:0,class:"flex justify-center py-8"},it={key:1,class:"text-center py-8"},dt={key:2,class:"overflow-x-auto"},rt={class:"table table-zebra"},ut={class:"flex gap-2"},mt=["onClick"],ct={class:"input input-bordered flex items-center gap-2"},pt={class:"input input-bordered flex items-center gap-2"},bt={class:"input input-bordered flex items-center gap-2"},ft={class:"flex gap-2"},vt={class:"text-center"},_t={class:"flex gap-2 justify-end"},gt=P({__name:"AdminsTab",async setup(M){let o,x;const{showSuccess:m,showError:g}=H(),{data:b,pending:u,refresh:h}=([o,x]=F(()=>G("/api/v1/admin/get/all",{key:"allAdmins"},"$m9GHtE-afp")),o=await o,x(),o),l=A(!1),_=A(!1),y=A(null),w=A({name:"",email:"",password:""}),k=async()=>{var p;try{const t=await $fetch("/api/v1/admin/create",{method:"POST",body:w.value});await h(),l.value=!1,z(),m("Administrador adicionado com sucesso")}catch(t){g(((p=t.data)==null?void 0:p.message)||"Erro ao adicionar administrador"),console.error("Error adding admin:",t)}},i=p=>{y.value=p,_.value=!0},V=async()=>{var p;if(y.value)try{await $fetch(`/api/v1/admin/delete/${y.value.id}`,{method:"DELETE"}),await h(),_.value=!1,y.value=null,m("Administrador removido com sucesso")}catch(t){g(((p=t.data)==null?void 0:p.message)||"Erro ao remover administrador"),console.error("Error deleting admin:",t)}},z=()=>{w.value={name:"",email:"",password:""}};return(p,t)=>{const n=O,$=K;return r(),d("div",null,[e("div",lt,[t[9]||(t[9]=e("h2",{class:"text-2xl font-bold"},"Admins",-1)),e("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=f=>l.value=!0)},[v(n,{name:"mdi:plus",size:"20"}),t[8]||(t[8]=E(" Adicionar Admin "))])]),s(u)?(r(),d("div",at,t[10]||(t[10]=[e("span",{class:"loading loading-spinner loading-lg"},null,-1)]))):!s(b)||s(b).length===0?(r(),d("div",it,t[11]||(t[11]=[e("p",{class:"text-base-content/60"},"Nenhum administrador encontrado",-1)]))):(r(),d("div",dt,[e("table",rt,[t[12]||(t[12]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Nome"),e("th",null,"Email"),e("th",null,"Ações")])],-1)),e("tbody",null,[(r(!0),d(S,null,I(s(b),f=>(r(),d("tr",{key:f.id},[e("td",null,a(f.id),1),e("td",null,a(f.name),1),e("td",null,a(f.email),1),e("td",null,[e("div",ut,[e("button",{class:"btn btn-sm btn-error",onClick:B=>i(f)},[v(n,{name:"mdi:delete",size:"16"})],8,mt)])])]))),128))])])])),v($,{modelValue:s(l),"onUpdate:modelValue":t[5]||(t[5]=f=>T(l)?l.value=f:null),title:"Adicionar Administrador",size:"md"},{footer:D(()=>[e("div",ft,[e("button",{type:"button",class:"btn btn-ghost",onClick:t[4]||(t[4]=f=>{l.value=!1,z()})}," Cancelar "),e("button",{type:"submit",class:"btn btn-primary",onClick:k}," Adicionar ")])]),default:D(()=>[e("form",{onSubmit:te(k,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",ct,[v(n,{name:"mdi:account",size:"16"}),C(e("input",{"onUpdate:modelValue":t[1]||(t[1]=f=>s(w).name=f),type:"text",placeholder:"Nome",required:"",class:"grow"},null,512),[[L,s(w).name]])])]),e("div",null,[e("label",pt,[v(n,{name:"mdi:email",size:"16"}),C(e("input",{"onUpdate:modelValue":t[2]||(t[2]=f=>s(w).email=f),type:"email",placeholder:"Email",required:"",class:"grow"},null,512),[[L,s(w).email]])])]),e("div",null,[e("label",bt,[v(n,{name:"mdi:lock",size:"16"}),C(e("input",{"onUpdate:modelValue":t[3]||(t[3]=f=>s(w).password=f),type:"password",placeholder:"Senha",required:"",minlength:"6",class:"grow"},null,512),[[L,s(w).password]])])])],32)]),_:1},8,["modelValue"]),v($,{modelValue:s(_),"onUpdate:modelValue":t[7]||(t[7]=f=>T(_)?_.value=f:null),title:"Confirmar Exclusão",size:"sm"},{footer:D(()=>[e("div",_t,[e("button",{class:"btn btn-ghost",onClick:t[6]||(t[6]=f=>{_.value=!1,y.value=null})}," Cancelar "),e("button",{class:"btn btn-error",onClick:V}," Remover ")])]),default:D(()=>{var f;return[e("p",vt,[t[13]||(t[13]=E(" Tem certeza que deseja remover o administrador ")),e("strong",null,a((f=s(y))==null?void 0:f.name),1),t[14]||(t[14]=E("? "))]),t[15]||(t[15]=e("p",{class:"text-center text-sm text-base-content/60 mt-2"}," Esta ação não pode ser desfeita. ",-1))]}),_:1,__:[15]},8,["modelValue"])])}}}),yt=Object.assign(gt,{__name:"AdminAdminsTab"}),xt={class:"min-h-screen bg-base-100"},ht={class:"p-4"},$t={role:"tablist",class:"tabs tabs-border"},wt={role:"tabpanel",class:"tab-content p-4"},kt={role:"tabpanel",class:"tab-content p-4"},Ct={role:"tabpanel",class:"tab-content p-4"},At={role:"tabpanel",class:"tab-content p-4"},Pt=P({__name:"admin",setup(M){const o=W("activeTab","orders");return(x,m)=>{const g=fe,b=Xe,u=ot,h=yt;return r(),d("div",xt,[m[4]||(m[4]=e("div",{class:"navbar bg-base-200"},[e("h1",{class:"text-xl font-bold mx-auto"},"Painel Administrativo")],-1)),e("div",ht,[e("div",$t,[C(e("input",{type:"radio",name:"admin_tabs",class:"tab","aria-label":"Produtos",value:"products","onUpdate:modelValue":m[0]||(m[0]=l=>T(o)?o.value=l:null)},null,512),[[U,s(o)]]),C(e("div",wt,[v(g)],512),[[q,s(o)==="products"]]),C(e("input",{type:"radio",name:"admin_tabs",class:"tab","aria-label":"Pedidos","onUpdate:modelValue":m[1]||(m[1]=l=>T(o)?o.value=l:null),value:"orders"},null,512),[[U,s(o)]]),C(e("div",kt,[v(b)],512),[[q,s(o)==="orders"]]),C(e("input",{type:"radio",name:"admin_tabs",class:"tab","aria-label":"Clientes","onUpdate:modelValue":m[2]||(m[2]=l=>T(o)?o.value=l:null),value:"clients"},null,512),[[U,s(o)]]),C(e("div",Ct,[v(u)],512),[[q,s(o)==="clients"]]),C(e("input",{type:"radio",name:"admin_tabs",class:"tab","aria-label":"Admins","onUpdate:modelValue":m[3]||(m[3]=l=>T(o)?o.value=l:null),value:"admins"},null,512),[[U,s(o)]]),C(e("div",At,[v(h)],512),[[q,s(o)==="admins"]])])])])}}});export{Pt as default};

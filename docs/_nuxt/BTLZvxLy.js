import j from"./CZQ1q976.js";import{f as $}from"./DwglZU8H.js";import{d as C,g as v,f as T,w as x,c as u,o as p,a as s,n as m,u as n,t as g,p as M,v as Q,H as A,l as I,b as N,h as R,F as P,r as S}from"./UOz9bPn-.js";import{c as V,b as y,r as w}from"./CljPmxiO.js";const z={class:"card bg-base-200 shadow-sm hover:shadow-lg transition-shadow overflow-hidden"},B={class:"absolute top-3 right-3 z-20"},q={class:"h-48"},F=["src","alt"],D={class:"card-body p-4"},E={class:"card-title text-lg mb-2"},K={class:"text-sm text-base-content/70 mb-4"},O={class:"card-actions justify-between items-center"},U={class:"text-xl font-bold text-primary"},H={key:0,class:"join"},L=["max"],G=["disabled"],J=["disabled"],W=C({__name:"Card",props:{product:{}},setup(_){const r=_,b=v(()=>{const t=r.product;return a.value<t.stock}),a=v(()=>{const t=r.product,i=V.value.find(f=>f.id===t.id);return i?i.quantity:0}),c=v(()=>r.product.stock-a.value),e=T(a.value.toString());x(a,t=>{e.value=t.toString()});const d=()=>{a.value<r.product.stock&&y(r.product)},o=()=>{if(a.value>0){if(a.value===1&&!confirm(`Você tem certeza que deseja remover ${r.product.title} do carrinho?`))return;w(r.product.id)}},l=()=>{let t=parseInt(e.value);(isNaN(t)||t<0)&&(alert("Quantidade inválida. Removendo produto do carrinho."),t=0),t>r.product.stock&&(alert("Quantidade excede o estoque disponível."),t=r.product.stock),e.value=t.toString();const i=t-a.value;if(i>0)y(r.product,i);else if(i<0)for(let f=0;f<Math.abs(i);f++)w(r.product.id)},h=t=>{b.value&&y(t)};return(t,i)=>{const f=j;return p(),u("div",z,[s("div",B,[s("span",{class:m(["badge badge-sm",{"badge-error":n(c)<=0,"badge-warning":n(c)>0&&n(c)<5,"badge-info":n(c)>=5}])},g(n(c)>0?`${n(c)} restantes`:"Esgotado"),3)]),s("figure",q,[s("img",{src:t.product.imageUrl,alt:t.product.title,class:m([{"filter grayscale opacity-70":n(c)<=0},"w-full h-full object-cover transition-all"])},null,10,F)]),s("div",D,[s("h2",E,g(t.product.title),1),s("p",K,g(t.product.description),1),s("div",O,[s("div",null,[s("div",U,g(("formatAsMoney"in t?t.formatAsMoney:n($))(t.product.priceInCents)),1),i[2]||(i[2]=s("div",{class:"text-xs text-base-content/50"},"preço unitário",-1))]),n(a)>0?(p(),u("div",H,[s("button",{title:"Retirar",class:"btn btn-sm btn-outline join-item",onClick:o}," - "),M(s("input",{"onUpdate:modelValue":i[0]||(i[0]=k=>I(e)?e.value=k:null),type:"number",class:"input input-sm pl-0 w-16 text-center join-item [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",min:"0",max:t.product.stock,onBlur:l,onKeyup:A(l,["enter"])},null,40,L),[[Q,n(e)]]),s("button",{class:m(["btn btn-sm btn-primary join-item",{"btn-disabled":n(a)>=t.product.stock}]),title:"Acrescentar",disabled:n(a)>=t.product.stock,onClick:d}," + ",10,G)])):(p(),u("button",{key:1,onClick:i[1]||(i[1]=k=>h(t.product)),disabled:!n(b)||n(c)<=0,class:m(["btn btn-primary btn-circle",{"btn-disabled":!n(b)||n(c)<=0}])},[N(f,{name:n(c)>0?"mdi:cart-plus":"mdi:cart-off",class:"text-white",size:"24"},null,8,["name"])],10,J))])])])}}}),ct=Object.assign(W,{__name:"ProductCard"}),X={key:0},Y={class:"join flex justify-center"},Z=["disabled"],tt=["onClick"],et={key:1,class:"join-item btn btn-sm btn-disabled"},ot=["disabled"],nt=C({__name:"Pagination",props:{currentPage:{},totalPages:{},totalItems:{}},emits:["nextPage","prevPage","goToPage"],setup(_,{emit:r}){const b=_,a=r,c=v(()=>{const e=b.totalPages,d=b.currentPage,o=[];if(e<=7)for(let l=1;l<=e;l++)o.push(l);else{o.push(1),d>4&&o.push("...");const l=Math.max(2,d-1),h=Math.min(e-1,d+1);for(let t=l;t<=h;t++)t!==1&&t!==e&&o.push(t);d<e-3&&o.push("..."),e>1&&o.push(e)}return o});return(e,d)=>e.totalPages>1?(p(),u("div",X,[s("div",Y,[s("button",{class:m(["join-item btn btn-sm",{"btn-disabled":e.currentPage===1}]),onClick:d[0]||(d[0]=o=>a("prevPage")),disabled:e.currentPage===1}," « ",10,Z),(p(!0),u(P,null,S(n(c),o=>(p(),u(P,{key:o},[typeof o=="number"?(p(),u("button",{key:0,class:m(["join-item btn btn-sm",{"btn-active":e.currentPage===o}]),onClick:l=>a("goToPage",o)},g(o),11,tt)):(p(),u("span",et,g(o),1))],64))),128)),s("button",{class:m(["join-item btn btn-sm",{"btn-disabled":e.currentPage===e.totalPages}]),onClick:d[1]||(d[1]=o=>a("nextPage")),disabled:e.currentPage===e.totalPages}," » ",10,ot)])])):R("",!0)}}),dt=Object.assign(nt,{__name:"Pagination"}),lt=()=>{typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})};export{dt as _,ct as a,lt as s};

import g from"./CZQ1q976.js";import{_ as D}from"./D9YUMtzL.js";import{_ as z}from"./DlAUqK2U.js";import{c as m,o as d,a as e,b as i,k as T,e as v,d as h,t as _,u as s,A as j,f as C,B as S,m as A,p as u,v as y,C as V,F as E,r as M,z as P,y as q,s as $,D as B}from"./UOz9bPn-.js";import{f as F,u as f}from"./DwglZU8H.js";import{c as p,a as I}from"./CljPmxiO.js";import{g as k}from"./DK1fvZ5c.js";const N={},O={class:"card bg-base-100 shadow-md border"},U={class:"card-body text-center py-12"},L={class:"flex justify-center mb-6"},R={class:"card-actions justify-center"};function H(x,r){const n=g,l=D;return d(),m("div",O,[e("div",U,[e("div",L,[i(n,{name:"mdi:cart-outline",size:"96"})]),r[1]||(r[1]=e("h2",{class:"card-title text-2xl text-base-content justify-center mb-4"}," Seu carrinho está vazio ",-1)),r[2]||(r[2]=e("p",{class:"text-base-content/70 mb-8 max-w-md"}," Adicione produtos para continuar com o pedido. ",-1)),e("div",R,[i(l,{to:"/",class:"btn btn-primary btn-lg"},{default:T(()=>[i(n,{name:"mdi:shopping",class:"mr-2"}),r[0]||(r[0]=v(" Continuar comprando "))]),_:1,__:[0]})])])])}const G=Object.assign(z(N,[["render",H]]),{__name:"CheckoutEmptyCard"}),J={class:"card bg-gradient-to-br from-base-100 to-base-200 shadow-xl border border-base-300/50 mb-6"},K={class:"card-body p-6"},Q={class:"flex items-center gap-3 mb-6"},W={class:"p-2 bg-primary/10 rounded-lg"},X={class:"space-y-4"},Y={class:"flex items-center justify-between p-4 bg-base-200/50 rounded-lg border border-base-300/30"},Z={class:"flex items-center gap-3"},ee={class:"p-2 bg-info/10 rounded-full"},te={class:"text-right"},se={class:"text-2xl font-bold text-info"},oe={class:"text-xs text-base-content/60"},ne={class:"flex items-center justify-between p-4 bg-success/5 rounded-lg border border-success/20"},ae={class:"flex items-center gap-3"},re={class:"p-2 bg-success/10 rounded-full"},ie={class:"text-right"},le={class:"text-2xl font-bold text-success"},de=h({__name:"SummaryCard",setup(x){return(r,n)=>{const l=g;return d(),m("div",J,[e("div",K,[e("div",Q,[e("div",W,[i(l,{name:"mdi:receipt-text",size:"24",class:"text-primary"})]),n[0]||(n[0]=e("div",null,[e("h2",{class:"card-title text-lg font-bold text-base-content"}," Resumo do Pedido "),e("p",{class:"text-sm text-base-content/60"}," Confira mais detalhes no seu carrinho ")],-1))]),e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[i(l,{name:"mdi:package-variant",size:"20",class:"text-info"})]),n[1]||(n[1]=e("div",null,[e("p",{class:"text-sm font-medium text-base-content"}," Total de Itens ")],-1))]),e("div",te,[e("span",se,_(s(p).length),1),e("p",oe,_(s(p).length===1?"item":"itens"),1)])]),e("div",ne,[e("div",ae,[e("div",re,[i(l,{name:"mdi:currency-usd",size:"20",class:"text-success"})]),n[2]||(n[2]=e("div",null,[e("p",{class:"text-sm font-medium text-base-content"},"Valor Total")],-1))]),e("div",ie,[e("span",le,_(("formatAsMoney"in r?r.formatAsMoney:s(F))(s(I))),1)])])])])])}}}),ce=Object.assign(de,{__name:"CheckoutSummaryCard"}),me=f("name",null),ue=f("apartment",null),pe=f("phone",null),be=f("deliveryDate",null),o=j({name:me,apartment:ue,phone:pe,deliveryDate:be}),_e={class:"card bg-base-100 shadow-lg"},ve={class:"card-body"},fe={class:"card-title text-primary mb-4"},xe={class:"form-control"},ye={class:"form-control"},ge={class:"form-control"},he={class:"form-control"},$e={class:"label"},Ce={class:"label-text-alt text-info"},Se=["value"],ke={class:"card-actions justify-end pt-4"},we=["disabled"],De={key:0,class:"loading loading-spinner loading-sm"},ze=h({__name:"FormCard",props:{isSubmitting:{type:Boolean}},emits:["submit"],setup(x,{emit:r}){const n=r,l=C([]);return S(()=>{l.value=k()}),(c,t)=>{const b=g;return d(),m("div",_e,[e("div",ve,[e("h2",fe,[i(b,{name:"mdi:truck-delivery",size:"24"}),t[5]||(t[5]=v(" Informações de Entrega "))]),e("form",{class:"space-y-4",onSubmit:t[4]||(t[4]=A(a=>n("submit"),["prevent"]))},[e("div",xe,[t[6]||(t[6]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Nome Completo"),e("span",{class:"label-text-alt text-error"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s(o).name=a),type:"text",required:"",minlength:"3",class:"input input-bordered focus:input-primary",placeholder:"Seu nome completo"},null,512),[[y,s(o).name,void 0,{trim:!0}]])]),e("div",ye,[t[7]||(t[7]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Apartamento"),e("span",{class:"label-text-alt text-error"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s(o).apartment=a),type:"number",required:"",min:"1",class:"input input-bordered focus:input-primary",placeholder:"Número do apartamento"},null,512),[[y,s(o).apartment,void 0,{number:!0,trim:!0}]])]),e("div",ge,[t[8]||(t[8]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Telefone"),e("span",{class:"label-text-alt text-error"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>s(o).phone=a),type:"tel",required:"",class:"input input-bordered focus:input-primary",placeholder:"(00) 00000-0000"},null,512),[[y,s(o).phone,void 0,{number:!0,trim:!0}]])]),e("div",he,[t[11]||(t[11]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Horário de Entrega"),e("span",{class:"label-text-alt text-error"},"*")],-1)),e("div",$e,[e("span",Ce,[i(b,{name:"mdi:information-outline",size:"16"}),t[9]||(t[9]=v(" As entregas acontecem no mesmo dia "))])]),u(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>s(o).deliveryDate=a),required:"",class:"select select-bordered focus:select-primary"},[t[10]||(t[10]=e("option",{value:"",disabled:""}," Selecione um horário ",-1)),(d(!0),m(E,null,M(s(l),a=>(d(),m("option",{key:a.value,value:a.value},_(a.label),9,Se))),128))],512),[[V,s(o).deliveryDate]])]),e("div",ke,[e("button",{type:"submit",disabled:c.isSubmitting||!s(o).name||!s(o).apartment||!s(o).phone||!s(o).deliveryDate,class:"btn btn-primary btn-lg w-full"},[c.isSubmitting?(d(),m("span",De)):(d(),P(b,{key:1,name:"mdi:check",size:"24",class:"ml-2"})),v(" "+_(c.isSubmitting?"Processando...":"Finalizar Pedido"),1)],8,we)])],32)])])}}}),Te=Object.assign(ze,{__name:"CheckoutFormCard"}),je={class:"min-h-screen bg-base-100"},Ae={class:"container mx-auto px-4 py-6 max-w-2xl"},Ie=h({__name:"checkout",setup(x){const r=C([]),n=q(!1),l=async()=>{if(!o.name||!o.apartment||!o.phone||!o.deliveryDate){alert("Por favor, preencha todos os campos obrigatórios.");return}n.value=!0;const c={client:{name:o.name,apartment:o.apartment,phone:o.phone,deliveryTime:o.deliveryDate},products:p.value.map(t=>({productId:t.id,quantity:t.quantity}))};try{console.log("Submitting order:",c),await $fetch("/api/v1/orders/create",{method:"POST",body:c}),p.value=[]}catch(t){console.error("Error submitting order:",t),alert("Erro ao realizar o pedido. Tente novamente.")}alert("Pedido realizado com sucesso!"),n.value=!1,await B("/")};return S(()=>{r.value=k()}),(c,t)=>{const b=G,a=ce,w=Te;return d(),m("div",je,[e("div",Ae,[u(i(b,null,null,512),[[$,s(p).length===0]]),u(e("div",null,[i(a),i(w,{onSubmit:l,"is-submitting":s(n)},null,8,["is-submitting"])],512),[[$,s(p).length>0]])])])}}});export{Ie as default};
